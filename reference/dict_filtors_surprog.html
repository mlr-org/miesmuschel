<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Progressive Surrogate Model Filtering — dict_filtors_surprog • miesmuschel</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Progressive Surrogate Model Filtering — dict_filtors_surprog"><meta property="og:description" content='Performs progressive surrogate model filtering. A surrogate model is used, as described in the parent class FiltorSurrogate.
The filtering is "progressive" in that successive values are filtered more agressively.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">miesmuschel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mlr-org/miesmuschel/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Progressive Surrogate Model Filtering</h1>
    <small class="dont-index">Source: <a href="https://github.com/mlr-org/miesmuschel/blob/HEAD/R/FiltorSurrogateProgressive.R" class="external-link"><code>R/FiltorSurrogateProgressive.R</code></a></small>
    <div class="hidden name"><code>dict_filtors_surprog.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Performs progressive surrogate model filtering. A surrogate model is used, as described in the parent class <code><a href="FiltorSurrogate.html">FiltorSurrogate</a></code>.
The filtering is "progressive" in that successive values are filtered more agressively.</p>
    </div>


    <div id="algorithm">
    <h2>Algorithm</h2>
    


<p>Given the number <code>n_filter</code> of of individuals to sample, and the desired pool size at round <code>i</code> <code>pool_size(i)</code>, progressive
surrogate model filtering proceeds as follows:</p><ol><li><p>Train the <code>surrogate_learner</code> <code><a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">LearnerRegr</a></code> on the <code>known_values</code> and their <code>fitnesses</code>.</p></li>
<li><p>Take <code>pool_size(1)</code> configurations, predict their expected performance using the surrogate model, and put them
into a pool <code>P</code> of configurations to consider.</p></li>
<li><p>Initialize <code>i</code> to 1.</p></li>
<li><p>Take the individual that is optimal according to predicted performance, remove it from <code>P</code> and add it to solution set <code>S</code>.</p></li>
<li><p>If the number of solutions in <code>S</code> equals <code>n_filter</code>, quit.</p></li>
<li><p>If <code>pool_size(i + 1)</code> is larger than <code>pool_size(i)</code>, take the next <code>pool_size(i + 1) - pool_size(i)</code> configurations,
predict their expected performance using the surrogate model, and add them to <code>P</code>. Otherwise, remove <code>pool_size(i) - pool_size(i + 1)</code>
random individuals from the pool. The size of <code>P</code> ends up being <code>pool_size(i + 1) - i</code>, as <code>i</code> individuals have also been removed and
added to <code>S</code>.</p></li>
<li><p>Increment <code>i</code>, jump to 4.</p></li>
</ol><p>(The algorithm presented here is optimized for clarity; the actual implementation does all the surrogate model prediction in one go, but is functionally
equivalent).</p>
<p><code>pool_size(i)</code> is calculated as <code>round(n_filter * pool_factor * (pool_factor_last / pool_factor) ^ (i / n_filter))</code>, i.e. a log-linear interpolation from
<code>pool_factor * n_filter</code> to <code>pool_factor_last * n_filter</code>.</p>
<p>The <code>pool_factor</code> and <code>pool_factor_last</code> configuration parameters of this algorithm determine how agressively the surrogate model is used to
filter out sampled configurations. If the filtering is agressive (large values), then more "exploitation" at the cost of "exploration" is performed.
When <code>pool_factor</code> is small but <code>pool_factor_last</code> is large (or vice-versa), then different individuals are filtered with different agressiveness, potentially
leading to a tradeoff between "exploration" and "exploitation".</p>
<p>When <code>pool_factor_last</code> is set, it defaults to <code>pool_factor</code>, with no new individuals added and no individuals removed from the filter pool during filtering.
It is equivalent to taking the top <code>n_filter</code> individuals out of a sample of <code>n_filter * pool_factor</code>.</p>
    </div>
    <div id="configuration-parameters">
    <h2>Configuration Parameters</h2>
    

<p><code>FiltorSurrogateProgressive</code>'s configuration parameters are the hyperparameters of the <code><a href="FiltorSurrogate.html">FiltorSurrogate</a></code> base class, as well as:</p><ul><li><p><code>filter.pool_factor</code> :: <code>numeric(1)</code><br><code>pool_factor</code> parameter of the progressive surrogate model filtering algorithm, see the corresponding section. Initialized to 1. Together with the
default of <code>filter.pool_factor_last</code>, this is equivalent to random sampling new individuals.</p></li>
<li><p><code>filter.pool_factor_last</code> :: <code>numeric(1)</code><br><code>pool_factor_last</code> parameter of the progressive surrogate model filtering algorithm, see the corresponding section.
When not given, it defaults to <code>filter.pool_factor</code>, equivalent to taking the top <code>n_filter</code> from <code>n_filter * pool_factor</code> individuals.</p></li>
</ul></div>
    <div id="supported-operand-types">
    <h2>Supported Operand Types</h2>
    

<p>See <code><a href="FiltorSurrogate.html">FiltorSurrogate</a></code> about supported operand types.</p>
    </div>
    <div id="dictionary">
    <h2>Dictionary</h2>
    

<p>This <code><a href="Filtor.html">Filtor</a></code> can be created with the short access form <code><a href="mut.html">ftr()</a></code>
(<code><a href="mut.html">ftrs()</a></code> to get a list), or through the the <a href="https://mlr3misc.mlr-org.com/reference/Dictionary.html" class="external-link">dictionary</a>
<code><a href="dict_filtors.html">dict_filtors</a></code> in the following way:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># preferred:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">ftr</span>(<span class="st">"surprog"</span>, <span class="sc">&lt;</span>surrogate_learner<span class="sc">&gt;</span> [, <span class="sc">&lt;</span>surrogate_selector<span class="sc">&gt;</span>])</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">ftrs</span>(<span class="st">"surprog"</span>, <span class="sc">&lt;</span>surrogate_learner<span class="sc">&gt;</span> [, <span class="sc">&lt;</span>surrogate_selector<span class="sc">&gt;</span>])  <span class="co"># takes vector IDs, returns list of Filtors</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># long form:</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>dict_filtors<span class="sc">$</span><span class="fu">get</span>(<span class="st">"surprog"</span>, <span class="sc">&lt;</span>surrogate_learner<span class="sc">&gt;</span> [, <span class="sc">&lt;</span>surrogate_selector<span class="sc">&gt;</span>])</span></code></pre><p></p></div>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other filtors: 
<code><a href="Filtor.html">Filtor</a></code>,
<code><a href="FiltorSurrogate.html">FiltorSurrogate</a></code>,
<code><a href="dict_filtors_maybe.html">dict_filtors_maybe</a></code>,
<code><a href="dict_filtors_null.html">dict_filtors_null</a></code>,
<code><a href="dict_filtors_proxy.html">dict_filtors_proxy</a></code>,
<code><a href="dict_filtors_surtour.html">dict_filtors_surtour</a></code></p></div>
    </div>
    <div id="super-classes">
    <h2>Super classes</h2>
    <p><code><a href="MiesOperator.html">miesmuschel::MiesOperator</a></code> -&gt; <code><a href="Filtor.html">miesmuschel::Filtor</a></code> -&gt; <code><a href="FiltorSurrogate.html">miesmuschel::FiltorSurrogate</a></code> -&gt; <code>FiltorSurrogateProgressive</code></p>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-FiltorSurrogateProgressive-new"><code>FiltorSurrogateProgressive$new()</code></a></p></li>
<li><p><a href="#method-FiltorSurrogateProgressive-clone"><code>FiltorSurrogateProgressive$clone()</code></a></p></li>
</ul></div><p><details><summary>Inherited methods</summary><ul><li><span class="pkg-link" data-pkg="miesmuschel" data-topic="MiesOperator" data-id="help"><a href="MiesOperator.html#method-help"><code>miesmuschel::MiesOperator$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="miesmuschel" data-topic="MiesOperator" data-id="operate"><a href="MiesOperator.html#method-operate"><code>miesmuschel::MiesOperator$operate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="miesmuschel" data-topic="MiesOperator" data-id="print"><a href="MiesOperator.html#method-print"><code>miesmuschel::MiesOperator$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="miesmuschel" data-topic="MiesOperator" data-id="repr"><a href="MiesOperator.html#method-repr"><code>miesmuschel::MiesOperator$repr()</code></a></span></li>
<li><span class="pkg-link" data-pkg="miesmuschel" data-topic="Filtor" data-id="needed_input"><a href="Filtor.html#method-needed_input"><code>miesmuschel::Filtor$needed_input()</code></a></span></li>
<li><span class="pkg-link" data-pkg="miesmuschel" data-topic="FiltorSurrogate" data-id="prime"><a href="FiltorSurrogate.html#method-prime"><code>miesmuschel::FiltorSurrogate$prime()</code></a></span></li>
</ul></details></p><hr><a id="method-FiltorSurrogateProgressive-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialize the <code>FiltorSurrogateProgressive</code>.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/dict_filtors_surprog.html">FiltorSurrogateProgressive</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">surrogate_learner</span>,</span>
<span>  surrogate_selector <span class="op">=</span> <span class="va"><a href="../reference/dict_selectors_best.html">SelectorBest</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>surrogate_learner</code></dt>
<dd><p>(<code><a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">mlr3::LearnerRegr</a></code>)<br>
Regression learner for the surrogate model filtering algorithm.<br>
The <code>$surrogate_learner</code> field will reflect this value.</p></dd>


<dt><code>surrogate_learner</code></dt>
<dd><p>(<code><a href="https://mlr3.mlr-org.com/reference/LearnerRegr.html" class="external-link">mlr3::LearnerRegr</a></code>)<br>
Regression learner for the surrogate model filtering algorithm.<br>
The <code>$surrogate_learner</code> field will reflect this value.</p></dd>


<dt><code>surrogate_selector</code></dt>
<dd><p>(<code><a href="Selector.html">Selector</a></code>)
<code><a href="Selector.html">Selector</a></code> for the surrogate model filtering algorithm.<br>
The <code>$surrogate_selector</code> field will reflect this value.</p></dd>


<dt><code>surrogate_selector</code></dt>
<dd><p>(<code><a href="Selector.html">Selector</a></code>)
<code><a href="Selector.html">Selector</a></code> for the surrogate model filtering algorithm.<br>
The <code>$surrogate_selector</code> field will reflect this value.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FiltorSurrogateProgressive-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FiltorSurrogateProgressive</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3.mlr-org.com" class="external-link">"mlr3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3learners.mlr-org.com" class="external-link">"mlr3learners"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fp</span> <span class="op">=</span> <span class="fu"><a href="mut.html">ftr</a></span><span class="op">(</span><span class="st">"surprog"</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.lm"</span><span class="op">)</span>, filter.pool_factor <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/ps.html" class="external-link">ps</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://paradox.mlr-org.com/reference/Domain.html" class="external-link">p_dbl</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">known_data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fitnesses</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></span>
<span class="r-in"><span><span class="va">new_data</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2.5</span>, <span class="fl">4.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fp</span><span class="op">$</span><span class="fu">prime</span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fp</span><span class="op">$</span><span class="fu">needed_input</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fp</span><span class="op">$</span><span class="fu">operate</span><span class="op">(</span><span class="va">new_data</span>, <span class="va">known_data</span>, <span class="va">fitnesses</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Martin Binder.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

